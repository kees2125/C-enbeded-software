<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
    <title>Nut/OS API</title>
    <link href="nut_en.css" rel="stylesheet" type="text/css">
</head>
<body bgcolor="#ffffff">
<!-- Generated by Doxygen 1.4.4 -->
<div class="qindex"><a class="qindex" href="main.html">Main&nbsp;Page</a> | <a class="qindex" href="modules.html">Modules</a> | <a class="qindex" href="classes.html">Alphabetical&nbsp;List</a> | <a class="qindex" href="annotated.html">Data&nbsp;Structures</a> | <a class="qindex" href="dirs.html">Directories</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class="qindex" href="functions.html">Data&nbsp;Fields</a> | <a class="qindex" href="globals.html">Globals</a> | <a class="qindex" href="pages.html">Related&nbsp;Pages</a> | <a class="qindex" href="examples.html">Examples</a></div>
<h1>SPI Digital I/O<br>
<small>
[<a class="el" href="group__xgHardwareAvr.html">Special Hardware</a>]</small>
</h1>
<p>
Collaboration diagram for SPI Digital I/O:<center><table><tr><td><img src="group__xgSpiDigIo.png" border="0" alt="" usemap="#group____xgSpiDigIo_map">
<map name="group____xgSpiDigIo_map">
<area href="group__xgHardwareAvr.html" shape="rect" coords="17,5,129,26" alt="">
</map></td></tr></table></center>
<hr><a name="_details"></a><h2>Detailed Description</h2>
SPI controlled digital input and output ports. 
<p>
This simple driver supports digital I/O ports like relay outputs and optocoupler inputs.
<p>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="group__xgNutOS.html#ga3">u_long</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__xgSpiDigIo.html#ga3">SpiDigitalGet</a> (ureg_t num)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Query digital inputs.  <a href="#ga3"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__xgSpiDigIo.html#ga4">SpiDigitalSet</a> (ureg_t num, <a class="el" href="group__xgNutOS.html#ga3">u_long</a> bits)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Set digital outputs.  <a href="#ga4"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__xgSpiDigIo.html#ga6">SpiDigitalInit</a> (ureg_t *inputs, ureg_t *outputs)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Initialize the digital I/O shift register interface.  <a href="#ga6"></a><br></td></tr>
</table>
<hr><h2>Function Documentation</h2>
<a class="anchor" name="ga3"></a><!-- doxytag: member="spidigio.c::SpiDigitalGet" ref="ga3" args="(ureg_t num)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"><a class="el" href="group__xgNutOS.html#ga3">u_long</a> SpiDigitalGet           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">ureg_t&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>num</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Query digital inputs. 
<p>
SpiDigitalInit() must have been called by the application before calling this function.<p>
This routine does not check the validity of the parameter.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>num</em>&nbsp;</td><td>Number of bits to query, typically 8, 16, 24 or the maximum value of 32. This number should exactly match the number of input pins. If it is lower, only the most significant bits are returned. However, this may be used by an application to scan these bits more often with reduced overhead.</td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>Binary value of the requested inputs. Only the specified number of bits are used. Bit 0 is the one, which has been shifted out last.</dd></dl>
    </td>
  </tr>
</table>
<a class="anchor" name="ga4"></a><!-- doxytag: member="spidigio.c::SpiDigitalSet" ref="ga4" args="(ureg_t num, u_long bits)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void SpiDigitalSet           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">ureg_t&nbsp;</td>
          <td class="mdname" nowrap> <em>num</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="group__xgNutOS.html#ga3">u_long</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>bits</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Set digital outputs. 
<p>
SpiDigitalInit() must have been called by the application before calling this function.<p>
This routine does not check the validity of any parameter.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>num</em>&nbsp;</td><td>Number of bits to set, typically 8, 16, 24 or 32, which is the maximum. The number must not be lower than the number of shift register output bits. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>bits</em>&nbsp;</td><td>The bit value to set. Only the number of bits specified are used, of which the most significant bit is shifted in first.</td></tr>
  </table>
</dl>
    </td>
  </tr>
</table>
<a class="anchor" name="ga6"></a><!-- doxytag: member="spidigio.c::SpiDigitalInit" ref="ga6" args="(ureg_t *inputs, ureg_t *outputs)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void SpiDigitalInit           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">ureg_t *&nbsp;</td>
          <td class="mdname" nowrap> <em>inputs</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>ureg_t *&nbsp;</td>
          <td class="mdname" nowrap> <em>outputs</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Initialize the digital I/O shift register interface. 
<p>
This routine must be called before using the interface.<p>
Automatically detects the number of digital inputs and outputs. However, the method used is limited and may fail on fast changing inputs. The application should check the result for plausibility. It is save to call the routine more than once.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>inputs</em>&nbsp;</td><td>Pointer to an 8-bit value, where the number of detected inputs will be stored. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>outputs</em>&nbsp;</td><td>Pointer to an 8-bit value, where the number of detected outputs will be stored.</td></tr>
  </table>
</dl>
    </td>
  </tr>
</table>
<hr>
<address>
  <small>
    &copy;&nbsp;2000-2006 by egnite Software GmbH - 
    visit <a href="http://www.ethernut.de/">http://www.ethernut.de/</a>
  </small>
</address>
</body>
</html>
