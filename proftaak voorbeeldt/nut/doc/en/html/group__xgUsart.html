<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
    <title>Nut/OS API</title>
    <link href="nut_en.css" rel="stylesheet" type="text/css">
</head>
<body bgcolor="#ffffff">
<!-- Generated by Doxygen 1.4.4 -->
<div class="qindex"><a class="qindex" href="main.html">Main&nbsp;Page</a> | <a class="qindex" href="modules.html">Modules</a> | <a class="qindex" href="classes.html">Alphabetical&nbsp;List</a> | <a class="qindex" href="annotated.html">Data&nbsp;Structures</a> | <a class="qindex" href="dirs.html">Directories</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class="qindex" href="functions.html">Data&nbsp;Fields</a> | <a class="qindex" href="globals.html">Globals</a> | <a class="qindex" href="pages.html">Related&nbsp;Pages</a> | <a class="qindex" href="examples.html">Examples</a></div>
<h1>USART Driver Frame<br>
<small>
[<a class="el" href="group__xgDriver.html">Device Driver API.</a>,&nbsp;<a class="el" href="group__xgDevSerial.html">USART Devices</a>]</small>
</h1>
<p>
Collaboration diagram for USART Driver Frame:<center><table><tr><td><img src="group__xgUsart.png" border="0" alt="" usemap="#group____xgUsart_map">
<map name="group____xgUsart_map">
<area href="group__xgDriver.html" shape="rect" coords="17,6,129,27" alt="">
<area href="group__xgDevSerial.html" shape="rect" coords="23,51,124,72" alt="">
</map></td></tr></table></center>
<hr><a name="_details"></a><h2>Detailed Description</h2>
Universal synchronous/asynchronous receiver/transmitter device driver. 
<p>
<a class="anchor" name="xrUsart"></a><p>
The USART device driver implements buffered, interrupt controlled serial communication. It supports software and hardware handshake, 9-bit communication, half duplex and synchronous operation.<p>
The driver's code is devided into a general part and a hardware dependant part, which simplifies porting it to different USART chips. The <a class="el" href="group__xgUsartAvr.html#xrUsartAvr">AVR USART Devices</a> provide support for the ATmega128/103 on-chip USARTs.
<p>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__xgUsart.html#ga0">UsartInit</a> (<a class="el" href="struct__NUTDEVICE.html">NUTDEVICE</a> *dev)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Initialize the USART device.  <a href="#ga0"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__xgUsart.html#ga2">UsartRead</a> (<a class="el" href="struct__NUTFILE.html">NUTFILE</a> *fp, void *buffer, int size)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Read from device.  <a href="#ga2"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__xgUsart.html#ga5">UsartWrite</a> (<a class="el" href="struct__NUTFILE.html">NUTFILE</a> *fp, CONST void *buffer, int len)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Write a device or file.  <a href="#ga5"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__xgUsart.html#ga6">UsartWrite_P</a> (<a class="el" href="struct__NUTFILE.html">NUTFILE</a> *fp, PGM_P buffer, int len)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Write a device or file.  <a href="#ga6"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__xgUsart.html#ga7">UsartClose</a> (<a class="el" href="struct__NUTFILE.html">NUTFILE</a> *fp)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Close an USART device.  <a href="#ga7"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="struct__NUTFILE.html">NUTFILE</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__xgUsart.html#ga8">UsartOpen</a> (<a class="el" href="struct__NUTDEVICE.html">NUTDEVICE</a> *dev, CONST char *name, int mode, int acc)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Open an USART device.  <a href="#ga8"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__xgUsart.html#ga9">UsartIOCtl</a> (<a class="el" href="struct__NUTDEVICE.html">NUTDEVICE</a> *dev, int req, void *conf)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Perform USART control functions.  <a href="#ga9"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">long&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__xgUsart.html#ga10">UsartSize</a> (<a class="el" href="struct__NUTFILE.html">NUTFILE</a> *fp)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Retrieves the number of characters in input buffer.  <a href="#ga10"></a><br></td></tr>
</table>
<hr><h2>Function Documentation</h2>
<a class="anchor" name="ga0"></a><!-- doxytag: member="usart.c::UsartInit" ref="ga0" args="(NUTDEVICE *dev)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">int UsartInit           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="struct__NUTDEVICE.html">NUTDEVICE</a> *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>dev</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Initialize the USART device. 
<p>
This function is called by <a class="el" href="group__xgDevice.html#ga7">NutRegisterDevice()</a>, using the <a class="el" href="struct__NUTDEVICE.html#o7">_NUTDEVICE::dev_init</a> entry. It will call the low level driver's <a class="el" href="struct__USARTDCB.html#o7">_USARTDCB::dcb_init</a> routine to initialize the hardware.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>dev</em>&nbsp;</td><td>Identifies the device to initialize.</td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>0 on success, -1 otherwise.</dd></dl>
<dl compact><dt><b><a class="el" href="todo.html#_todo000053">Todo:</a></b></dt><dd>Read initial settings from EEPROM. </dd></dl>
    </td>
  </tr>
</table>
<a class="anchor" name="ga2"></a><!-- doxytag: member="usart.c::UsartRead" ref="ga2" args="(NUTFILE *fp, void *buffer, int size)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">int UsartRead           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="struct__NUTFILE.html">NUTFILE</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>fp</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>void *&nbsp;</td>
          <td class="mdname" nowrap> <em>buffer</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>size</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Read from device. 
<p>
This function is called by the low level input routines of the <a class="el" href="group__xgCrtLowio.html#xrCrtLowio">C runtime library</a>, using the <a class="el" href="struct__NUTDEVICE.html#o9">_NUTDEVICE::dev_read</a> entry.<p>
The function may block the calling thread until at least one character has been received or a timeout occurs.<p>
It is recommended to set a proper read timeout with software handshake. In this case a timeout may occur, if the communication peer lost our last XON character. The application may then use ioctl() to disable the receiver and do the read again. This will send out another XON.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>fp</em>&nbsp;</td><td>Pointer to a <a class="el" href="struct__NUTFILE.html">_NUTFILE</a> structure, obtained by a previous call to <a class="el" href="group__xgUsart.html#ga8">UsartOpen()</a>. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>buffer</em>&nbsp;</td><td>Pointer to the buffer that receives the data. If zero, then all characters in the input buffer will be removed. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>size</em>&nbsp;</td><td>Maximum number of bytes to read.</td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>The number of bytes read, which may be less than the number of bytes specified. A return value of -1 indicates an error, while zero is returned in case of a timeout.</dd></dl>
    </td>
  </tr>
</table>
<a class="anchor" name="ga5"></a><!-- doxytag: member="usart.c::UsartWrite" ref="ga5" args="(NUTFILE *fp, CONST void *buffer, int len)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">int UsartWrite           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="struct__NUTFILE.html">NUTFILE</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>fp</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>CONST void *&nbsp;</td>
          <td class="mdname" nowrap> <em>buffer</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>len</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Write a device or file. 
<p>
This function is called by the low level output routines of the <a class="el" href="group__xgCrtLowio.html#xrCrtLowio">C runtime library</a>, using the <a class="el" href="struct__NUTDEVICE.html#o10">_NUTDEVICE::dev_write</a> entry.<p>
The function may block the calling thread.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>fp</em>&nbsp;</td><td>Pointer to a <a class="el" href="struct__NUTFILE.html">_NUTFILE</a> structure, obtained by a previous call to <a class="el" href="group__xgUsart.html#ga8">UsartOpen()</a>. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>buffer</em>&nbsp;</td><td>Pointer to the data to be written. If zero, then the output buffer will be flushed. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>len</em>&nbsp;</td><td>Number of bytes to write.</td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>The number of bytes written, which may be less than the number of bytes specified if a timeout occured. A return value of -1 indicates an error.</dd></dl>
    </td>
  </tr>
</table>
<a class="anchor" name="ga6"></a><!-- doxytag: member="usart.c::UsartWrite_P" ref="ga6" args="(NUTFILE *fp, PGM_P buffer, int len)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">int UsartWrite_P           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="struct__NUTFILE.html">NUTFILE</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>fp</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>PGM_P&nbsp;</td>
          <td class="mdname" nowrap> <em>buffer</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>len</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Write a device or file. 
<p>
Similar to <a class="el" href="group__xgUsart.html#ga5">UsartWrite()</a> except that the data is located in program memory.<p>
This function is called by the low level output routines of the <a class="el" href="group__xgCrtLowio.html#xrCrtLowio">C runtime library</a>, using the <a class="el" href="struct__NUTDEVICE.html#o11">_NUTDEVICE::dev_write_P</a> entry.<p>
The function may block the calling thread.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>fp</em>&nbsp;</td><td>Pointer to a NUTFILE structure, obtained by a previous call to <a class="el" href="group__xgUsart.html#ga8">UsartOpen()</a>. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>buffer</em>&nbsp;</td><td>Pointer to the data in program space to be written. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>len</em>&nbsp;</td><td>Number of bytes to write.</td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>The number of bytes written, which may be less than the number of bytes specified if a timeout occured. A return value of -1 indicates an error.</dd></dl>
    </td>
  </tr>
</table>
<a class="anchor" name="ga7"></a><!-- doxytag: member="usart.c::UsartClose" ref="ga7" args="(NUTFILE *fp)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">int UsartClose           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="struct__NUTFILE.html">NUTFILE</a> *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>fp</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Close an USART device. 
<p>
This function is called by the low level close routine of the C runtime library, using the <a class="el" href="struct__NUTDEVICE.html#o13">_NUTDEVICE::dev_close</a> entry.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>fp</em>&nbsp;</td><td>Pointer to a <a class="el" href="struct__NUTFILE.html">_NUTFILE</a> structure, obtained by a previous call to <a class="el" href="group__xgUsart.html#ga8">UsartOpen()</a>.</td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>0 on success or -1 otherwise.</dd></dl>
<dl compact><dt><b><a class="el" href="todo.html#_todo000054">Todo:</a></b></dt><dd>We may support shared open and use dev_irq as an open counter. </dd></dl>
    </td>
  </tr>
</table>
<a class="anchor" name="ga8"></a><!-- doxytag: member="usart.c::UsartOpen" ref="ga8" args="(NUTDEVICE *dev, CONST char *name, int mode, int acc)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"><a class="el" href="struct__NUTFILE.html">NUTFILE</a>* UsartOpen           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="struct__NUTDEVICE.html">NUTDEVICE</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>dev</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>CONST char *&nbsp;</td>
          <td class="mdname" nowrap> <em>name</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>mode</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>acc</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Open an USART device. 
<p>
This function is called by the low level open routine of the C runtime library, using the <a class="el" href="struct__NUTDEVICE.html#o12">_NUTDEVICE::dev_open</a> entry.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>dev</em>&nbsp;</td><td>Pointer to the NUTDEVICE structure. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>name</em>&nbsp;</td><td>Ignored, should point to an empty string. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>mode</em>&nbsp;</td><td>Operation mode. Any of the following values may be or-ed:<ul>
<li><a class="el" href="group__xgCrtLowio.html#ga17">_O_BINARY</a></li><li><a class="el" href="group__xgCrtLowio.html#ga9">_O_RDONLY</a></li><li><a class="el" href="group__xgCrtLowio.html#ga10">_O_WRONLY</a> </li></ul>
</td></tr>
    <tr><td valign="top"></td><td valign="top"><em>acc</em>&nbsp;</td><td>Ignored, should be zero.</td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>Pointer to a NUTFILE structure if successful or NUTFILE_EOF otherwise.</dd></dl>
<dl compact><dt><b><a class="el" href="todo.html#_todo000055">Todo:</a></b></dt><dd>We may support shared open and use dev_irq as an open counter. </dd></dl>
    </td>
  </tr>
</table>
<a class="anchor" name="ga9"></a><!-- doxytag: member="usart.c::UsartIOCtl" ref="ga9" args="(NUTDEVICE *dev, int req, void *conf)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">int UsartIOCtl           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="struct__NUTDEVICE.html">NUTDEVICE</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>dev</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>req</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>void *&nbsp;</td>
          <td class="mdname" nowrap> <em>conf</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Perform USART control functions. 
<p>
This function is called by the ioctl() function of the C runtime library.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>dev</em>&nbsp;</td><td>Identifies the device that receives the device-control function. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>req</em>&nbsp;</td><td>Requested control function. May be set to one of the following constants:<ul>
<li><a class="el" href="group__xgUARTIOCTL.html#ga0">UART_SETSPEED</a></li><li><a class="el" href="group__xgUARTIOCTL.html#ga1">UART_GETSPEED</a></li><li><a class="el" href="group__xgUARTIOCTL.html#ga2">UART_SETDATABITS</a></li><li><a class="el" href="group__xgUARTIOCTL.html#ga3">UART_GETDATABITS</a></li><li><a class="el" href="group__xgUARTIOCTL.html#ga4">UART_SETPARITY</a></li><li><a class="el" href="group__xgUARTIOCTL.html#ga5">UART_GETPARITY</a></li><li><a class="el" href="group__xgUARTIOCTL.html#ga6">UART_SETSTOPBITS</a></li><li><a class="el" href="group__xgUARTIOCTL.html#ga7">UART_GETSTOPBITS</a></li><li><a class="el" href="group__xgUARTIOCTL.html#ga8">UART_SETSTATUS</a></li><li><a class="el" href="group__xgUARTIOCTL.html#ga9">UART_GETSTATUS</a></li><li><a class="el" href="group__xgUARTIOCTL.html#ga10">UART_SETREADTIMEOUT</a></li><li><a class="el" href="group__xgUARTIOCTL.html#ga11">UART_GETREADTIMEOUT</a></li><li><a class="el" href="group__xgUARTIOCTL.html#ga12">UART_SETWRITETIMEOUT</a></li><li><a class="el" href="group__xgUARTIOCTL.html#ga13">UART_GETWRITETIMEOUT</a></li><li><a class="el" href="group__xgUARTIOCTL.html#ga14">UART_SETLOCALECHO</a></li><li><a class="el" href="group__xgUARTIOCTL.html#ga15">UART_GETLOCALECHO</a></li><li><a class="el" href="group__xgUARTIOCTL.html#ga16">UART_SETFLOWCONTROL</a></li><li><a class="el" href="group__xgUARTIOCTL.html#ga17">UART_GETFLOWCONTROL</a></li><li><a class="el" href="group__xgUARTIOCTL.html#ga18">UART_SETCOOKEDMODE</a></li><li><a class="el" href="group__xgUARTIOCTL.html#ga19">UART_GETCOOKEDMODE</a></li><li><a class="el" href="group__xgUARTIOCTL.html#ga24">UART_SETCLOCKMODE</a></li><li><a class="el" href="group__xgUARTIOCTL.html#ga25">UART_GETCLOCKMODE</a></li><li><a class="el" href="group__xgUARTIOCTL.html#ga26">UART_SETTXBUFSIZ</a></li><li><a class="el" href="group__xgUARTIOCTL.html#ga27">UART_GETTXBUFSIZ</a></li><li><a class="el" href="group__xgUARTIOCTL.html#ga28">UART_SETRXBUFSIZ</a></li><li><a class="el" href="group__xgUARTIOCTL.html#ga29">UART_GETRXBUFSIZ</a></li><li><a class="el" href="group__xgUARTIOCTL.html#ga30">UART_SETTXBUFLWMARK</a></li><li><a class="el" href="group__xgUARTIOCTL.html#ga31">UART_GETTXBUFLWMARK</a></li><li><a class="el" href="group__xgUARTIOCTL.html#ga32">UART_SETTXBUFHWMARK</a></li><li><a class="el" href="group__xgUARTIOCTL.html#ga33">UART_GETTXBUFHWMARK</a></li><li><a class="el" href="group__xgUARTIOCTL.html#ga34">UART_SETRXBUFLWMARK</a></li><li><a class="el" href="group__xgUARTIOCTL.html#ga35">UART_GETRXBUFLWMARK</a></li><li><a class="el" href="group__xgUARTIOCTL.html#ga36">UART_SETRXBUFHWMARK</a></li><li><a class="el" href="group__xgUARTIOCTL.html#ga37">UART_GETRXBUFHWMARK</a></li></ul>
</td></tr>
    <tr><td valign="top"></td><td valign="top"><em>conf</em>&nbsp;</td><td>Points to a buffer that contains any data required for the given control function or receives data from that function. </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>0 on success, -1 otherwise.</dd></dl>
<dl compact><dt><b>Note:</b></dt><dd>Not all control functions may be supported on all platforms. In any case applications should check the returned result.</dd></dl>
<dl compact><dt><b><a class="el" href="todo.html#_todo000056">Todo:</a></b></dt><dd>Hardware handshake is not available with AT91 targets.</dd></dl>
<dl compact><dt><b>Warning:</b></dt><dd>Timeout values are given in milliseconds and are limited to the granularity of the system timer. To disable timeout, set the parameter to NUT_WAIT_INFINITE.</dd></dl>
    </td>
  </tr>
</table>
<a class="anchor" name="ga10"></a><!-- doxytag: member="usart.c::UsartSize" ref="ga10" args="(NUTFILE *fp)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">long UsartSize           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="struct__NUTFILE.html">NUTFILE</a> *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>fp</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Retrieves the number of characters in input buffer. 
<p>
This function is called by the low level size routine of the C runtime library, using the <a class="el" href="struct__NUTDEVICE.html#o14">_NUTDEVICE::dev_size</a> entry.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>fp</em>&nbsp;</td><td>Pointer to a <a class="el" href="struct__NUTFILE.html">_NUTFILE</a> structure, obtained by a previous call to <a class="el" href="group__xgUsart.html#ga8">UsartOpen()</a>.</td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>The number of bytes currently stored in input buffer.</dd></dl>
    </td>
  </tr>
</table>
<hr>
<address>
  <small>
    &copy;&nbsp;2000-2006 by egnite Software GmbH - 
    visit <a href="http://www.ethernut.de/">http://www.ethernut.de/</a>
  </small>
</address>
</body>
</html>
