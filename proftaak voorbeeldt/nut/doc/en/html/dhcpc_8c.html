<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
    <title>Nut/OS API</title>
    <link href="nut_en.css" rel="stylesheet" type="text/css">
</head>
<body bgcolor="#ffffff">
<!-- Generated by Doxygen 1.4.4 -->
<div class="qindex"><a class="qindex" href="main.html">Main&nbsp;Page</a> | <a class="qindex" href="modules.html">Modules</a> | <a class="qindex" href="classes.html">Alphabetical&nbsp;List</a> | <a class="qindex" href="annotated.html">Data&nbsp;Structures</a> | <a class="qindex" href="dirs.html">Directories</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class="qindex" href="functions.html">Data&nbsp;Fields</a> | <a class="qindex" href="globals.html">Globals</a> | <a class="qindex" href="pages.html">Related&nbsp;Pages</a> | <a class="qindex" href="examples.html">Examples</a></div>
<div class="nav">
<a class="el" href="dir_000000.html">ethernut-4.3.3</a>&nbsp;&raquo&nbsp;<a class="el" href="dir_000001.html">nut</a>&nbsp;&raquo&nbsp;<a class="el" href="dir_000052.html">pro</a></div>
<h1>dhcpc.c File Reference</h1><hr><a name="_details"></a><h2>Detailed Description</h2>
DHCP client. 
<p>
<div class="fragment"><pre class="fragment"> *
 * $Log: dhcpc.c,v $
 * Revision 1.22  2006/08/01 07:38:41  haraldkipp
 * DHCP client failed because of alignment errors. Removed the dispensable
 * 'packed' attribute from the dyn_cfg structure.
 *
 * Revision 1.21  2006/01/23 19:52:10  haraldkipp
 * Added required typecasts before left shift.
 *
 * Revision 1.20  2006/01/23 17:35:54  haraldkipp
 * BOOTP and DYNCFG structures must be packed.
 * Fixed memory alignment bug, which retrieved wrong values from DHCP options.
 *
 * Revision 1.19  2005/08/02 17:47:04  haraldkipp
 * Major API documentation update.
 *
 * Revision 1.18  2005/04/05 17:44:57  haraldkipp
 * Made stack space configurable.
 *
 * Revision 1.17  2005/03/28 18:26:59  mrjones4u
 * Fixed non-release bug in DCHP client
 *
 * Revision 1.16  2005/02/03 14:33:56  haraldkipp
 * Several bug fixes and enhancements. The most important fix will
 * avoid hanging, when Ethernut is reset while ICMP pings are
 * received. A large number of changes make the client to follow
 * RFC 2131 more closely, like maintaining renewal and rebind time.
 * Two new API calls, NutDhcpStatus() and NutDhcpError(), allow
 * to query the current status of the DHCP client. The previously
 * introduced API call NutDhcpIsConfigured() has been marked
 * deprecated. Another problem was with timeout, because the client
 * continued negotiation with the server after the timeout time
 * given in the API called elapsed. Now all internal timeouts are
 * adjusted to the API timeout. Furthermore the previous version
 * let the client continue on fatal errors like UDP receive or UDP
 * broadcast failures. Now the client stops on such errors and
 * informs the caller. Finally the documentation has been enhanced.
 *
 * Revision 1.15  2004/12/31 10:51:40  drsung
 * Bugfixes from Michel Hendriks applied:
 * Allocate empty dyncfg's to prevent freeing twice of domain/hostname
 * Clear pointer after ReleaseDynCfg to prevent freeing twice
 * Make sure SelectOffer is never called with 0 offers
 * When falling back from rebooting to selecting, clear
 * the received ip address so NutDhcpIfConfig does not
 * assume it has been configured properly
 *
 * Revision 1.14  2004/04/15 07:16:47  drsung
 * Now it works... :-/
 *
 * Revision 1.13  2004/04/15 07:11:50  drsung
 * Added hostname support to NutDHCPDiscover
 *
 * Revision 1.12  2004/03/18 11:24:01  haraldkipp
 * Deprecated functions removed
 *
 * Revision 1.11  2004/03/03 17:53:28  drsung
 * Support for new field 'hostname' in structure confos added.
 *
 * Revision 1.10  2004/02/25 16:34:32  haraldkipp
 * New API added to relinguish the DHCP lease. Collecting more
 * than one offer is now disabled, if the application sets timeout
 * below three times of MAX_DHCP_WAIT (5 seconds). The lease renewal
 * will now start when 3/4 has elapsed, opposed to 1/2 used previously.
 * Finally the DHCP thread will sleep as long as possible, while the
 * previous version woke up every ten seconds.
 *
 * Revision 1.9  2004/02/02 18:54:43  drsung
 * gateway ip address was not set, if static network configuration from EEPROM is used.
 *
 * Revision 1.8  2004/01/14 17:50:41  drsung
 * Fix for Win2k DHCP server applied. Thanks to Damian Slee
 *
 * Revision 1.7  2003/11/03 16:22:59  haraldkipp
 * Renewal disabled if lease time is set to zero
 *
 * Revision 1.6  2003/10/13 10:18:08  haraldkipp
 * Using new seconds counter
 *
 * Revision 1.5  2003/08/07 09:09:08  haraldkipp
 * Redesign to follow RFC 2131 more closely.
 *
 * Revision 1.4  2003/07/20 18:25:40  haraldkipp
 * Support secondary DNS.
 *
 * Revision 1.3  2003/07/17 09:44:14  haraldkipp
 * Removed default MAC address and let the caller have a second chance.
 *
 * Revision 1.2  2003/05/15 14:25:38  haraldkipp
 * Some DHCP servers discard discover telegrams.
 * Thanks to Tomohiro Haraikawa.
 *
 * Revision 1.1.1.1  2003/05/09 14:41:57  haraldkipp
 * Initial using 3.2.1
 *
 * </pre></div>
<p>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Data Structures</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structbootp.html">bootp</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">BOOTP message structure.  <a href="structbootp.html#_details">More...</a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structdyn__cfg.html">dyn_cfg</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Dynamic configuration structure.  <a href="structdyn__cfg.html#_details">More...</a><br></td></tr>
<tr><td colspan="2"><br><h2>DHCP Client Configuration</h2></td></tr>
<tr><td colspan="2">The Nut/OS Configurator may be used to override the default values. <br><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="a0"></a><!-- doxytag: member="dhcpc.c::DHCP_SERVERPORT" ref="a0" args="" -->
#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dhcpc_8c.html#a0">DHCP_SERVERPORT</a>&nbsp;&nbsp;&nbsp;67</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">UDP port of DHCP server. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="a1"></a><!-- doxytag: member="dhcpc.c::DHCP_CLIENTPORT" ref="a1" args="" -->
#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dhcpc_8c.html#a1">DHCP_CLIENTPORT</a>&nbsp;&nbsp;&nbsp;68</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">UDP port of DHCP client. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dhcpc_8c.html#a2">MAX_DHCP_MSGSIZE</a>&nbsp;&nbsp;&nbsp;576</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Maximum DHCP message size we can accept.  <a href="#a2"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dhcpc_8c.html#a3">MIN_DHCP_MSGSIZE</a>&nbsp;&nbsp;&nbsp;300</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Minimum DHCP message length.  <a href="#a3"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dhcpc_8c.html#a4">MAX_DHCP_BUFSIZE</a>&nbsp;&nbsp;&nbsp;1728</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Maximum UDP buffer size used by the DHCP client.  <a href="#a4"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dhcpc_8c.html#a5">MIN_DHCP_WAIT</a>&nbsp;&nbsp;&nbsp;4000</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Minimum number of milliseconds to wait for a response.  <a href="#a5"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dhcpc_8c.html#a6">MAX_DHCP_WAIT</a>&nbsp;&nbsp;&nbsp;64000</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Maximum number of milliseconds to wait for a response.  <a href="#a6"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dhcpc_8c.html#a7">MAX_DCHP_RETRIES</a>&nbsp;&nbsp;&nbsp;3</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Maximum number of request retries.  <a href="#a7"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dhcpc_8c.html#a8">MAX_DCHP_RELEASE_RETRIES</a>&nbsp;&nbsp;&nbsp;0</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Maximum number of release retries.  <a href="#a8"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dhcpc_8c.html#a9">DHCP_DEFAULT_LEASE</a>&nbsp;&nbsp;&nbsp;43200</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Default lease time in seconds.  <a href="#a9"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="a10"></a><!-- doxytag: member="dhcpc.c::MAX_DHCP_NAPTIME" ref="a10" args="" -->
#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dhcpc_8c.html#a10">MAX_DHCP_NAPTIME</a>&nbsp;&nbsp;&nbsp;4294967</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Maximum sleep time in seconds. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="a11"></a><!-- doxytag: member="dhcpc.c::NUT_THREAD_DHCPSTACK" ref="a11" args="" -->
#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dhcpc_8c.html#a11">NUT_THREAD_DHCPSTACK</a>&nbsp;&nbsp;&nbsp;512</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Stack size of the DHCP client thread. <br></td></tr>
<tr><td colspan="2"><br><h2>DHCP Message Types</h2></td></tr>
<tr><td colspan="2">See RFC 2131. <br><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="a12"></a><!-- doxytag: member="dhcpc.c::DHCP_DISCOVER" ref="a12" args="" -->
#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dhcpc_8c.html#a12">DHCP_DISCOVER</a>&nbsp;&nbsp;&nbsp;1</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Client broadcast to locate available servers. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dhcpc_8c.html#a13">DHCP_OFFER</a>&nbsp;&nbsp;&nbsp;2</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Server to client in response to DHCP_DISCOVER.  <a href="#a13"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dhcpc_8c.html#a14">DHCP_REQUEST</a>&nbsp;&nbsp;&nbsp;3</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Client message to servers.  <a href="#a14"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dhcpc_8c.html#a15">DHCP_DECLINE</a>&nbsp;&nbsp;&nbsp;4</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Client to server indicating network address is already in use.  <a href="#a15"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dhcpc_8c.html#a16">DHCP_ACK</a>&nbsp;&nbsp;&nbsp;5</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Server to client with configuration parameters.  <a href="#a16"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dhcpc_8c.html#a17">DHCP_NAK</a>&nbsp;&nbsp;&nbsp;6</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Server to client indicating client's notion of network address is incorrect.  <a href="#a17"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="a18"></a><!-- doxytag: member="dhcpc.c::DHCP_RELEASE" ref="a18" args="" -->
#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dhcpc_8c.html#a18">DHCP_RELEASE</a>&nbsp;&nbsp;&nbsp;7</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Client to server relinquishing network address and cancelling remaining lease. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dhcpc_8c.html#a19">DHCP_INFORM</a>&nbsp;&nbsp;&nbsp;8</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Client to server, asking only for local configuration parameters.  <a href="#a19"></a><br></td></tr>
<tr><td colspan="2"><br><h2>DHCP Options</h2></td></tr>
<tr><td colspan="2">Nut/Net recognizes a subset of options defined in RFC 2132. <br><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dhcpc_8c.html#a20">DHCPOPT_PAD</a>&nbsp;&nbsp;&nbsp;0</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">DHCP pad option.  <a href="#a20"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="a21"></a><!-- doxytag: member="dhcpc.c::DHCPOPT_NETMASK" ref="a21" args="" -->
#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dhcpc_8c.html#a21">DHCPOPT_NETMASK</a>&nbsp;&nbsp;&nbsp;1</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">DHCP subnet mask option. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="a22"></a><!-- doxytag: member="dhcpc.c::DHCPOPT_GATEWAY" ref="a22" args="" -->
#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dhcpc_8c.html#a22">DHCPOPT_GATEWAY</a>&nbsp;&nbsp;&nbsp;3</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">DHCP router option. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="a23"></a><!-- doxytag: member="dhcpc.c::DHCPOPT_DNS" ref="a23" args="" -->
#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dhcpc_8c.html#a23">DHCPOPT_DNS</a>&nbsp;&nbsp;&nbsp;6</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">DHCP domain name server option. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="a24"></a><!-- doxytag: member="dhcpc.c::DHCPOPT_HOSTNAME" ref="a24" args="" -->
#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dhcpc_8c.html#a24">DHCPOPT_HOSTNAME</a>&nbsp;&nbsp;&nbsp;12</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">DHCP host name option. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="a25"></a><!-- doxytag: member="dhcpc.c::DHCPOPT_DOMAIN" ref="a25" args="" -->
#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dhcpc_8c.html#a25">DHCPOPT_DOMAIN</a>&nbsp;&nbsp;&nbsp;15</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">DHCP domain name option. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="a26"></a><!-- doxytag: member="dhcpc.c::DHCPOPT_BROADCAST" ref="a26" args="" -->
#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dhcpc_8c.html#a26">DHCPOPT_BROADCAST</a>&nbsp;&nbsp;&nbsp;28</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">DHCP broadcast address option. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="a27"></a><!-- doxytag: member="dhcpc.c::DHCPOPT_REQESTIP" ref="a27" args="" -->
#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dhcpc_8c.html#a27">DHCPOPT_REQESTIP</a>&nbsp;&nbsp;&nbsp;50</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">DHCP requested IP address option. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="a28"></a><!-- doxytag: member="dhcpc.c::DHCPOPT_LEASETIME" ref="a28" args="" -->
#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dhcpc_8c.html#a28">DHCPOPT_LEASETIME</a>&nbsp;&nbsp;&nbsp;51</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">DHCP IP address lease time option. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="a29"></a><!-- doxytag: member="dhcpc.c::DHCPOPT_MSGTYPE" ref="a29" args="" -->
#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dhcpc_8c.html#a29">DHCPOPT_MSGTYPE</a>&nbsp;&nbsp;&nbsp;53</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">DHCP message type option. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="a30"></a><!-- doxytag: member="dhcpc.c::DHCPOPT_SID" ref="a30" args="" -->
#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dhcpc_8c.html#a30">DHCPOPT_SID</a>&nbsp;&nbsp;&nbsp;54</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">DHCP server identifier option. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="a31"></a><!-- doxytag: member="dhcpc.c::DHCPOPT_PARAMREQUEST" ref="a31" args="" -->
#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dhcpc_8c.html#a31">DHCPOPT_PARAMREQUEST</a>&nbsp;&nbsp;&nbsp;55</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">DHCP parameter request list option. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="a32"></a><!-- doxytag: member="dhcpc.c::DHCPOPT_MAXMSGSIZE" ref="a32" args="" -->
#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dhcpc_8c.html#a32">DHCPOPT_MAXMSGSIZE</a>&nbsp;&nbsp;&nbsp;57</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Maximum DHCP message size option. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="a33"></a><!-- doxytag: member="dhcpc.c::DHCPOPT_RENEWALTIME" ref="a33" args="" -->
#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dhcpc_8c.html#a33">DHCPOPT_RENEWALTIME</a>&nbsp;&nbsp;&nbsp;58</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">DHCP renewal time option. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="a34"></a><!-- doxytag: member="dhcpc.c::DHCPOPT_REBINDTIME" ref="a34" args="" -->
#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dhcpc_8c.html#a34">DHCPOPT_REBINDTIME</a>&nbsp;&nbsp;&nbsp;59</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">DHCP rebinding time option. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="a35"></a><!-- doxytag: member="dhcpc.c::DHCPOPT_END" ref="a35" args="" -->
#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dhcpc_8c.html#a35">DHCPOPT_END</a>&nbsp;&nbsp;&nbsp;255</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">DHCP end option. <br></td></tr>
<tr><td colspan="2"><br><h2>Typedefs</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="a36"></a><!-- doxytag: member="dhcpc.c::BOOTP" ref="a36" args="" -->
typedef <a class="el" href="structbootp.html">bootp</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dhcpc_8c.html#a36">BOOTP</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">BOOTP message structure type. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="a37"></a><!-- doxytag: member="dhcpc.c::DYNCFG" ref="a37" args="" -->
typedef <a class="el" href="structdyn__cfg.html">dyn_cfg</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dhcpc_8c.html#a37">DYNCFG</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Dynamic configuration structure type. <br></td></tr>
<tr><td colspan="2"><br><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dhcpc_8c.html#a62">NutDhcpClient</a> (void *arg)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">DHCP client thread.  <a href="#a62"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dhcpc_8c.html#a64">NutDhcpIfConfig</a> (CONST char *name, u_char *mac, <a class="el" href="group__xgNutOS.html#ga3">u_long</a> timeout)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Automatically configure an Ethernet network interface.  <a href="#a64"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dhcpc_8c.html#a65">NutDhcpRelease</a> (CONST char *name, <a class="el" href="group__xgNutOS.html#ga3">u_long</a> timeout)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Relinguish our DHCP lease.  <a href="#a65"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dhcpc_8c.html#a66">NutDhcpInform</a> (CONST char *name, <a class="el" href="group__xgNutOS.html#ga3">u_long</a> timeout)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Inform DHCP about an allocated address.  <a href="#a66"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dhcpc_8c.html#a67">NutDhcpStatus</a> (CONST char *name)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Return DHCP client status.  <a href="#a67"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dhcpc_8c.html#a68">NutDhcpError</a> (CONST char *name)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Return DHCP error code.  <a href="#a68"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dhcpc_8c.html#a69">NutDhcpIsConfigured</a> (void)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Check if DHCP has configured our interface.  <a href="#a69"></a><br></td></tr>
</table>
<hr><h2>Define Documentation</h2>
<a class="anchor" name="a2"></a><!-- doxytag: member="dhcpc.c::MAX_DHCP_MSGSIZE" ref="a2" args="" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">#define MAX_DHCP_MSGSIZE&nbsp;&nbsp;&nbsp;576          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Maximum DHCP message size we can accept. 
<p>
RFC 2131 demands, that a DHCP client must be prepared to receive DHCP messages with an options field length of at least 312 octets. This implies that we must be able to accept messages of up to 576 octets.    </td>
  </tr>
</table>
<a class="anchor" name="a3"></a><!-- doxytag: member="dhcpc.c::MIN_DHCP_MSGSIZE" ref="a3" args="" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">#define MIN_DHCP_MSGSIZE&nbsp;&nbsp;&nbsp;300          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Minimum DHCP message length. 
<p>
Used to maintain BOOTP compatibility of outgoing messages.    </td>
  </tr>
</table>
<a class="anchor" name="a4"></a><!-- doxytag: member="dhcpc.c::MAX_DHCP_BUFSIZE" ref="a4" args="" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">#define MAX_DHCP_BUFSIZE&nbsp;&nbsp;&nbsp;1728          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Maximum UDP buffer size used by the DHCP client. 
<p>
If this item is not equal zero, the DHCP client will use its value to set <a class="el" href="socket_8h.html#a14">SO_RCVBUF</a> by calling <a class="el" href="group__xgUdpSocket.html#ga7">NutUdpSetSockOpt()</a>.<p>
If this item is set to zero, <a class="el" href="group__xgUdpSocket.html#ga7">NutUdpSetSockOpt()</a> is not called and the UDP socket interface will buffer the last incoming datagram on the <a class="el" href="dhcpc_8c.html#a1">DHCP_CLIENTPORT</a> socket port only. Any previously received datagram is silently discarded. As long as one DHCP server is expected in the local network, this will be fine and save some heap memory while DHCP is active.    </td>
  </tr>
</table>
<a class="anchor" name="a5"></a><!-- doxytag: member="dhcpc.c::MIN_DHCP_WAIT" ref="a5" args="" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">#define MIN_DHCP_WAIT&nbsp;&nbsp;&nbsp;4000          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Minimum number of milliseconds to wait for a response. 
<p>
If we receive no response from a DHCP server within this time, we will double this value up to <a class="el" href="dhcpc_8c.html#a6">MAX_DHCP_WAIT</a> and repeat our request up to <a class="el" href="dhcpc_8c.html#a7">MAX_DCHP_RETRIES</a> times before giving up.    </td>
  </tr>
</table>
<a class="anchor" name="a6"></a><!-- doxytag: member="dhcpc.c::MAX_DHCP_WAIT" ref="a6" args="" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">#define MAX_DHCP_WAIT&nbsp;&nbsp;&nbsp;64000          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Maximum number of milliseconds to wait for a response. 
<p>
The timeout value for receiving server responses will be doubled on each retry but limited by this value.    </td>
  </tr>
</table>
<a class="anchor" name="a7"></a><!-- doxytag: member="dhcpc.c::MAX_DCHP_RETRIES" ref="a7" args="" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">#define MAX_DCHP_RETRIES&nbsp;&nbsp;&nbsp;3          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Maximum number of request retries. 
<p>
We will give up after resending this number of requests without receiving a response.    </td>
  </tr>
</table>
<a class="anchor" name="a8"></a><!-- doxytag: member="dhcpc.c::MAX_DCHP_RELEASE_RETRIES" ref="a8" args="" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">#define MAX_DCHP_RELEASE_RETRIES&nbsp;&nbsp;&nbsp;0          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Maximum number of release retries. 
<p>
RFC 2131 doesn't specify a server response to release messages from the client. If the message gets lost, then the lease isn't released.    </td>
  </tr>
</table>
<a class="anchor" name="a9"></a><!-- doxytag: member="dhcpc.c::DHCP_DEFAULT_LEASE" ref="a9" args="" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">#define DHCP_DEFAULT_LEASE&nbsp;&nbsp;&nbsp;43200          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Default lease time in seconds. 
<p>
This value is used if the server doesn't provide a lease time.    </td>
  </tr>
</table>
<a class="anchor" name="a13"></a><!-- doxytag: member="dhcpc.c::DHCP_OFFER" ref="a13" args="" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">#define DHCP_OFFER&nbsp;&nbsp;&nbsp;2          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Server to client in response to DHCP_DISCOVER. 
<p>
Contains an offer of configuration parameters.    </td>
  </tr>
</table>
<a class="anchor" name="a14"></a><!-- doxytag: member="dhcpc.c::DHCP_REQUEST" ref="a14" args="" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">#define DHCP_REQUEST&nbsp;&nbsp;&nbsp;3          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Client message to servers. 
<p>
Used for<ul>
<li>requesting offered parameters from one server and implicitly declining offers from all others.</li><li>confirming correctness of previously allocated address after, e.g., system reboot.</li><li>extending the lease on a particular network address.</li></ul>
    </td>
  </tr>
</table>
<a class="anchor" name="a15"></a><!-- doxytag: member="dhcpc.c::DHCP_DECLINE" ref="a15" args="" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">#define DHCP_DECLINE&nbsp;&nbsp;&nbsp;4          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Client to server indicating network address is already in use. 
<p>
Not used by Nut/Net.    </td>
  </tr>
</table>
<a class="anchor" name="a16"></a><!-- doxytag: member="dhcpc.c::DHCP_ACK" ref="a16" args="" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">#define DHCP_ACK&nbsp;&nbsp;&nbsp;5          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Server to client with configuration parameters. 
<p>
Contains committed network address.    </td>
  </tr>
</table>
<a class="anchor" name="a17"></a><!-- doxytag: member="dhcpc.c::DHCP_NAK" ref="a17" args="" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">#define DHCP_NAK&nbsp;&nbsp;&nbsp;6          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Server to client indicating client's notion of network address is incorrect. 
<p>
May be caused by the client's move to new subnet or by expiration of the client's lease.    </td>
  </tr>
</table>
<a class="anchor" name="a19"></a><!-- doxytag: member="dhcpc.c::DHCP_INFORM" ref="a19" args="" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">#define DHCP_INFORM&nbsp;&nbsp;&nbsp;8          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Client to server, asking only for local configuration parameters. 
<p>
Used, if the client already has externally configured network address.    </td>
  </tr>
</table>
<a class="anchor" name="a20"></a><!-- doxytag: member="dhcpc.c::DHCPOPT_PAD" ref="a20" args="" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">#define DHCPOPT_PAD&nbsp;&nbsp;&nbsp;0          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
DHCP pad option. 
<p>
The pad option can be used to cause subsequent fields to align on word boundaries.    </td>
  </tr>
</table>
<hr><h2>Function Documentation</h2>
<a class="anchor" name="a62"></a><!-- doxytag: member="dhcpc.c::NutDhcpClient" ref="a62" args="(void *arg)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">NutDhcpClient           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">void *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>arg</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
DHCP client thread. 
<p>
This thread implements a DHCP state machine and is automatically started when calling <a class="el" href="pro_2dhcp_8h.html#a17">NutDhcpIfConfig()</a> or <a class="el" href="pro_2dhcp_8h.html#a19">NutDhcpInform()</a>.<p>
<dl compact><dt><b><a class="el" href="bug.html#_bug000007">Bug:</a></b></dt><dd>We are not able to shutdown our interface, which may cause problems if out original DHCP server dies.</dd></dl>
<dl compact><dt><b><a class="el" href="todo.html#_todo000042">Todo:</a></b></dt><dd>We are using a bunch of global variables, which must be associated to a specific interfase if we want to support more than one Ethernet port. </dd></dl>
    </td>
  </tr>
</table>
<a class="anchor" name="a64"></a><!-- doxytag: member="dhcpc.c::NutDhcpIfConfig" ref="a64" args="(CONST char *name, u_char *mac, u_long timeout)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">int NutDhcpIfConfig           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">CONST char *&nbsp;</td>
          <td class="mdname" nowrap> <em>name</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>u_char *&nbsp;</td>
          <td class="mdname" nowrap> <em>mac</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="group__xgNutOS.html#ga3">u_long</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>timeout</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Automatically configure an Ethernet network interface. 
<p>
If no MAC address is specified, this routine will try to read a previously stored configuration from the EEPROM. If this retrieves a fixed IP configuration, then the network interface will be immediately configured with these values by calling <a class="el" href="group__xgIP.html#ga6">NutNetIfConfig()</a>. If no valid IP configuration has been read, then this routine will start the DHCP client thread and wait upto a given number of milliseconds for an acknowledged configuration from a DHCP server.<p>
If a MAC address has been specified, this routine will not read the EEPROM configuration. If the application has set the global <a class="el" href="group__xgConfNet.html#ga0">CONFNET</a> structure to a valid IP configuration before calling this function, then the network interface will be immediately configured with these values by calling <a class="el" href="group__xgIP.html#ga6">NutNetIfConfig()</a>. Otherwise the DHCP client thread will be started and this routine will wait upto a given number of milliseconds for an acknowledged configuration from a DHCP server.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>name</em>&nbsp;</td><td>Name of the registered Ethernet device. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>mac</em>&nbsp;</td><td>MAC address of the destination. Set NULL to use the configuration stored in the EEPROM. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>timeout</em>&nbsp;</td><td>Maximum number of milliseconds to wait. To disable timeout, set this parameter to <a class="el" href="group__xgEvent.html#ga8">NUT_WAIT_INFINITE</a>. Otherwise the value must be larger than 3 times of <a class="el" href="dhcpc_8c.html#a5">MIN_DHCP_WAIT</a> to enable collection of offers from multiple servers.</td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>0 if the interface had been successfully configured. In most cases this information is sufficient, because the application will not care whether the configuration had been provided by a DHCP server or EEPROM values. However, if EEPROM values had been used, then no DNS servers had been set. The application can call <a class="el" href="pro_2dhcp_8h.html#a20">NutDhcpStatus()</a> to check the DHCP bound state. -1 is returned if the interface configuration failed. In this case <a class="el" href="pro_2dhcp_8h.html#a21">NutDhcpError()</a> can be called to get a more specific error code.</dd></dl>
    </td>
  </tr>
</table>
<a class="anchor" name="a65"></a><!-- doxytag: member="dhcpc.c::NutDhcpRelease" ref="a65" args="(CONST char *name, u_long timeout)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">int NutDhcpRelease           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">CONST char *&nbsp;</td>
          <td class="mdname" nowrap> <em>name</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="group__xgNutOS.html#ga3">u_long</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>timeout</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Relinguish our DHCP lease. 
<p>
This function may be called by the application if we are moving to another network. It helps the DHCP server to tidy up his allocation table, but is not a required DHCP function.<p>
Upon return, the system should be shut down within 20 seconds.<p>
The client must reside in state <a class="el" href="pro_2dhcp_8h.html#a5">DHCPST_BOUND</a>.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>name</em>&nbsp;</td><td>Name of the registered Ethernet device, currently ignored. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>timeout</em>&nbsp;</td><td>Maximum number of milliseconds to wait.</td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>0 on success or -1 in case of an error.</dd></dl>
    </td>
  </tr>
</table>
<a class="anchor" name="a66"></a><!-- doxytag: member="dhcpc.c::NutDhcpInform" ref="a66" args="(CONST char *name, u_long timeout)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">int NutDhcpInform           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">CONST char *&nbsp;</td>
          <td class="mdname" nowrap> <em>name</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="group__xgNutOS.html#ga3">u_long</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>timeout</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Inform DHCP about an allocated address. 
<p>
The client must reside in state <a class="el" href="pro_2dhcp_8h.html#a0">DHCPST_IDLE</a>.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>name</em>&nbsp;</td><td>Name of the registered Ethernet device, currently ignored. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>timeout</em>&nbsp;</td><td>Maximum number of milliseconds to wait.</td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>0 on success or -1 in case of an error.</dd></dl>
    </td>
  </tr>
</table>
<a class="anchor" name="a67"></a><!-- doxytag: member="dhcpc.c::NutDhcpStatus" ref="a67" args="(CONST char *name)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">int NutDhcpStatus           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">CONST char *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>name</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Return DHCP client status. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>name</em>&nbsp;</td><td>Name of the registered Ethernet device, currently ignored.</td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>DHCP status code, which may be any of the following:<ul>
<li><a class="el" href="pro_2dhcp_8h.html#a1">DHCPST_INIT</a></li><li><a class="el" href="pro_2dhcp_8h.html#a2">DHCPST_SELECTING</a></li><li><a class="el" href="pro_2dhcp_8h.html#a3">DHCPST_REQUESTING</a></li><li><a class="el" href="pro_2dhcp_8h.html#a4">DHCPST_REBOOTING</a></li><li><a class="el" href="pro_2dhcp_8h.html#a5">DHCPST_BOUND</a></li><li><a class="el" href="pro_2dhcp_8h.html#a6">DHCPST_RENEWING</a></li><li><a class="el" href="pro_2dhcp_8h.html#a7">DHCPST_REBINDING</a></li><li><a class="el" href="pro_2dhcp_8h.html#a8">DHCPST_INFORMING</a></li><li><a class="el" href="pro_2dhcp_8h.html#a9">DHCPST_RELEASING</a></li><li><a class="el" href="pro_2dhcp_8h.html#a0">DHCPST_IDLE</a></li></ul>
</dd></dl>
    </td>
  </tr>
</table>
<a class="anchor" name="a68"></a><!-- doxytag: member="dhcpc.c::NutDhcpError" ref="a68" args="(CONST char *name)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">int NutDhcpError           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">CONST char *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>name</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Return DHCP error code. 
<p>
Possible error codes are<p>
<ul>
<li><a class="el" href="pro_2dhcp_8h.html#a10">DHCPERR_TIMEOUT</a></li><li><a class="el" href="pro_2dhcp_8h.html#a11">DHCPERR_NOMAC</a></li><li><a class="el" href="pro_2dhcp_8h.html#a13">DHCPERR_BADDEV</a></li><li><a class="el" href="pro_2dhcp_8h.html#a14">DHCPERR_SYSTEM</a></li><li><a class="el" href="pro_2dhcp_8h.html#a15">DHCPERR_TRANSMIT</a></li><li><a class="el" href="pro_2dhcp_8h.html#a16">DHCPERR_RECEIVE</a></li></ul>
<p>
The error will be cleared upon return.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>name</em>&nbsp;</td><td>Name of the registered Ethernet device, currently ignored.</td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>DHCP error code or 0 if no error occured.</dd></dl>
    </td>
  </tr>
</table>
<a class="anchor" name="a69"></a><!-- doxytag: member="dhcpc.c::NutDhcpIsConfigured" ref="a69" args="(void)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">int NutDhcpIsConfigured           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">void&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Check if DHCP has configured our interface. 
<p>
<dl compact><dt><b><a class="el" href="deprecated.html#_deprecated000003">Deprecated:</a></b></dt><dd>Applications should use <a class="el" href="pro_2dhcp_8h.html#a20">NutDhcpStatus()</a>.</dd></dl>
<dl compact><dt><b>Returns:</b></dt><dd>0 if DHCP is in bound state.</dd></dl>
    </td>
  </tr>
</table>
<hr>
<address>
  <small>
    &copy;&nbsp;2000-2006 by egnite Software GmbH - 
    visit <a href="http://www.ethernut.de/">http://www.ethernut.de/</a>
  </small>
</address>
</body>
</html>
