<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
    <title>Nut/OS API</title>
    <link href="nut_en.css" rel="stylesheet" type="text/css">
</head>
<body bgcolor="#ffffff">
<!-- Generated by Doxygen 1.4.4 -->
<div class="qindex"><a class="qindex" href="main.html">Main&nbsp;Page</a> | <a class="qindex" href="modules.html">Modules</a> | <a class="qindex" href="classes.html">Alphabetical&nbsp;List</a> | <a class="qindex" href="annotated.html">Data&nbsp;Structures</a> | <a class="qindex" href="dirs.html">Directories</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class="qindex" href="functions.html">Data&nbsp;Fields</a> | <a class="qindex" href="globals.html">Globals</a> | <a class="qindex" href="pages.html">Related&nbsp;Pages</a> | <a class="qindex" href="examples.html">Examples</a></div>
<div class="nav">
<a class="el" href="dir_000000.html">ethernut-4.3.3</a>&nbsp;&raquo&nbsp;<a class="el" href="dir_000001.html">nut</a>&nbsp;&raquo&nbsp;<a class="el" href="dir_000033.html">include</a>&nbsp;&raquo&nbsp;<a class="el" href="dir_000041.html">sys</a></div>
<h1>thread.h File Reference</h1><hr><a name="_details"></a><h2>Detailed Description</h2>
Thread management definitions. 
<p>
<div class="fragment"><pre class="fragment"> *
 * $Log: thread.h,v $
 * Revision 1.15  2006/09/29 12:24:14  haraldkipp
 * Stack allocation code moved from thread module to heap module.
 * All code should use dedicated stack allocation routines. For targets
 * allocating stack from the normal heap the API calls are remapped by
 * preprocessor macros.
 *
 * Revision 1.14  2006/06/29 03:52:19  hwmaier
 * Added include statement for cfg/memory.h so the macro
 * NUTMEM_STACKHEAP is found when compiling for the
 * AT90CAN128.
 *
 * Revision 1.13  2006/06/28 14:35:31  haraldkipp
 * Event/thread/timer re-design.
 * Code indention corrected.
 * Volatile attribute removed from THREADINFO link pointer.
 *
 * Revision 1.12  2006/03/16 15:25:34  haraldkipp
 * Changed human readable strings from u_char to char to stop GCC 4 from
 * nagging about signedness.
 *
 * Revision 1.11  2005/10/07 21:48:25  hwmaier
 * Using __AVR_ENHANCED__ macro instead of __AVR_ATmega128__ to support also AT90CAN128 MCU
 *
 * Revision 1.10  2005/10/04 05:25:17  hwmaier
 * Added support for separating stack and conventional heap as required by AT09CAN128 MCUs
 *
 * Revision 1.9  2005/08/02 17:46:49  haraldkipp
 * Major API documentation update.
 *
 * Revision 1.8  2005/07/26 15:49:59  haraldkipp
 * Cygwin support added.
 *
 * Revision 1.7  2005/02/17 14:42:37  phblum
 * Removed volatile declarations of runQueue since it is not touched from interrupt context. Same for nutThreadList, runningThread and killedThreads.
 *
 * Revision 1.6  2005/02/16 19:53:15  haraldkipp
 * Ready-to-run queue handling removed from interrupt context.
 *
 * Revision 1.5  2004/07/09 19:51:34  freckle
 * Added new function NutThreadSetSleepMode to tell nut/os to set the MCU
 * into sleep mode when idle (avr-gcc &amp;&amp; avr128 only)
 *
 * Revision 1.4  2004/04/07 12:13:57  haraldkipp
 * Matthias Ringwald's *nix emulation added
 *
 * Revision 1.3  2004/03/16 16:48:44  haraldkipp
 * Added Jan Dubiec's H8/300 port.
 *
 * Revision 1.2  2003/12/15 19:28:26  haraldkipp
 * Kill function prototypes
 *
 * Revision 1.1.1.1  2003/05/09 14:41:22  haraldkipp
 * Initial using 3.2.1
 *
 * Revision 1.14  2003/02/04 18:00:54  harald
 * Version 3 released
 *
 * Revision 1.13  2002/10/29 15:40:50  harald
 * *** empty log message ***
 *
 * Revision 1.12  2002/06/26 17:29:29  harald
 * First pre-release with 2.4 stack
 *
 * </pre></div>
<p>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Data Structures</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct__NUTTHREADINFO.html">_NUTTHREADINFO</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Thread information structure.  <a href="struct__NUTTHREADINFO.html#_details">More...</a><br></td></tr>
<tr><td colspan="2"><br><h2>Thread States</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="thread_8h.html#a1">TDS_TERM</a>&nbsp;&nbsp;&nbsp;0</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="thread_8h.html#a2">TDS_RUNNING</a>&nbsp;&nbsp;&nbsp;1</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="thread_8h.html#a3">TDS_READY</a>&nbsp;&nbsp;&nbsp;2</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="thread_8h.html#a4">TDS_SLEEP</a>&nbsp;&nbsp;&nbsp;3</td></tr>

<tr><td colspan="2"><br><h2>Defines</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="a0"></a><!-- doxytag: member="thread.h::DEADBEEF" ref="a0" args="" -->
#define&nbsp;</td><td class="memItemRight" valign="bottom"><b>DEADBEEF</b>&nbsp;&nbsp;&nbsp;0xDEADBEEF</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="a5"></a><!-- doxytag: member="thread.h::SLEEP_MODE_NONE" ref="a5" args="" -->
#define&nbsp;</td><td class="memItemRight" valign="bottom"><b>SLEEP_MODE_NONE</b>&nbsp;&nbsp;&nbsp;0xff</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="thread_8h.html#a6">THREAD</a>(threadfn, arg)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Macro for thread entry definitions.  <a href="#a6"></a><br></td></tr>
<tr><td colspan="2"><br><h2>Typedefs</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">typedef <a class="el" href="struct__NUTTHREADINFO.html">_NUTTHREADINFO</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__xgThread.html#ga0">NUTTHREADINFO</a></td></tr>

<tr><td colspan="2"><br><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__xgNutArchAvrInit.html#ga3">NutThreadSetSleepMode</a> (u_char mode)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Sets the sleep mode to enter in Idle thread.  <a href="group__xgNutArchAvrInit.html#ga3"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="group__xgNutOS.html#ga5">HANDLE</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__xgNutArchAvrOsContextGcc.html#ga2">NutThreadCreate</a> (char *name, void(*fn)(void *), void *arg, size_t stackSize)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Create a new thread.  <a href="group__xgNutArchAvrOsContextGcc.html#ga2"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">u_char&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__xgThread.html#ga10">NutThreadSetPriority</a> (u_char level)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Set the current thread's priority.  <a href="group__xgThread.html#ga10"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__xgThread.html#ga13">NutThreadKill</a> (void)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Kill the running thread.  <a href="group__xgThread.html#ga13"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__xgThread.html#ga12">NutThreadDestroy</a> (void)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Free a thread that was previously killed and release memory back to the OS.  <a href="group__xgThread.html#ga12"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__xgThread.html#ga11">NutThreadExit</a> (void)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">End the current thread.  <a href="group__xgThread.html#ga11"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__xgThread.html#ga7">NutThreadResume</a> (void)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Continue with the highest priority thread, which is ready to run.  <a href="group__xgThread.html#ga7"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__xgThread.html#ga8">NutThreadWake</a> (<a class="el" href="group__xgNutOS.html#ga5">HANDLE</a> timer, <a class="el" href="group__xgNutOS.html#ga5">HANDLE</a> th)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Resume a previously suspended thread.  <a href="group__xgThread.html#ga8"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__xgThread.html#ga9">NutThreadYield</a> (void)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Give up the CPU.  <a href="group__xgThread.html#ga9"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__xgThread.html#ga5">NutThreadAddPriQueue</a> (<a class="el" href="struct__NUTTHREADINFO.html">NUTTHREADINFO</a> *td, <a class="el" href="struct__NUTTHREADINFO.html">NUTTHREADINFO</a> *volatile *tqpp)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Add a thread to a prioritiy ordered queue.  <a href="group__xgThread.html#ga5"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__xgThread.html#ga6">NutThreadRemoveQueue</a> (<a class="el" href="struct__NUTTHREADINFO.html">NUTTHREADINFO</a> *td, <a class="el" href="struct__NUTTHREADINFO.html">NUTTHREADINFO</a> *volatile *tqpp)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Remove a thread from a specified queue.  <a href="group__xgThread.html#ga6"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__xgNutArchAvrOsContextIcc.html#ga1">NutThreadSwitch</a> (void)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Switch to another thread.  <a href="group__xgNutArchAvrOsContextIcc.html#ga1"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="group__xgNutOS.html#ga5">HANDLE</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__xgThread.html#ga14">GetThreadByName</a> (char *name)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Query handle of a thread with a specific name.  <a href="group__xgThread.html#ga14"></a><br></td></tr>
<tr><td colspan="2"><br><h2>Variables</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="struct__NUTTHREADINFO.html">NUTTHREADINFO</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__xgThread.html#ga1">runningThread</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Currently running thread.  <a href="group__xgThread.html#ga1"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="struct__NUTTHREADINFO.html">NUTTHREADINFO</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__xgThread.html#ga3">nutThreadList</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">List of all created threads.  <a href="group__xgThread.html#ga3"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="struct__NUTTHREADINFO.html">NUTTHREADINFO</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__xgThread.html#ga4">runQueue</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">List of ready-to-run threads.  <a href="group__xgThread.html#ga4"></a><br></td></tr>
</table>
<hr><h2>Define Documentation</h2>
<a class="anchor" name="a1"></a><!-- doxytag: member="thread.h::TDS_TERM" ref="a1" args="" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">#define TDS_TERM&nbsp;&nbsp;&nbsp;0          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Thread has exited. <dl compact><dt><b>Examples: </b></dt><dd>
<a class="el" href="portdio_2portdio_8c-example.html#a281">portdio/portdio.c</a>, <a class="el" href="pppc_2pppc_8c-example.html#a324">pppc/pppc.c</a>, and <a class="el" href="tcps_2tcps_8c-example.html#a414">tcps/tcps.c</a>.</dl>    </td>
  </tr>
</table>
<a class="anchor" name="a2"></a><!-- doxytag: member="thread.h::TDS_RUNNING" ref="a2" args="" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">#define TDS_RUNNING&nbsp;&nbsp;&nbsp;1          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Thread is running. <dl compact><dt><b>Examples: </b></dt><dd>
<a class="el" href="portdio_2portdio_8c-example.html#a282">portdio/portdio.c</a>, <a class="el" href="pppc_2pppc_8c-example.html#a325">pppc/pppc.c</a>, and <a class="el" href="tcps_2tcps_8c-example.html#a415">tcps/tcps.c</a>.</dl>    </td>
  </tr>
</table>
<a class="anchor" name="a3"></a><!-- doxytag: member="thread.h::TDS_READY" ref="a3" args="" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">#define TDS_READY&nbsp;&nbsp;&nbsp;2          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Thread is ready to run. <dl compact><dt><b>Examples: </b></dt><dd>
<a class="el" href="portdio_2portdio_8c-example.html#a283">portdio/portdio.c</a>, <a class="el" href="pppc_2pppc_8c-example.html#a326">pppc/pppc.c</a>, and <a class="el" href="tcps_2tcps_8c-example.html#a416">tcps/tcps.c</a>.</dl>    </td>
  </tr>
</table>
<a class="anchor" name="a4"></a><!-- doxytag: member="thread.h::TDS_SLEEP" ref="a4" args="" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">#define TDS_SLEEP&nbsp;&nbsp;&nbsp;3          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Thread is sleeping. <dl compact><dt><b>Examples: </b></dt><dd>
<a class="el" href="portdio_2portdio_8c-example.html#a284">portdio/portdio.c</a>, <a class="el" href="pppc_2pppc_8c-example.html#a327">pppc/pppc.c</a>, and <a class="el" href="tcps_2tcps_8c-example.html#a417">tcps/tcps.c</a>.</dl>    </td>
  </tr>
</table>
<a class="anchor" name="a6"></a><!-- doxytag: member="thread.h::THREAD" ref="a6" args="(threadfn, arg)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">#define THREAD          </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">threadfn,         <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>arg&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<b>Value:</b><div class="fragment"><pre class="fragment"><span class="keywordtype">void</span> threadfn(<span class="keywordtype">void</span> *arg) __attribute__ ((noreturn)); \
<span class="keywordtype">void</span> threadfn(<span class="keywordtype">void</span> *arg)
</pre></div>Macro for thread entry definitions. 
<p>
<dl compact><dt><b>Examples: </b></dt><dd>
<a class="el" href="events_2events_8c-example.html#a11">events/events.c</a>, <a class="el" href="ftpd_2ftpserv_8c-example.html#a42">ftpd/ftpserv.c</a>, <a class="el" href="httpd_2httpserv_8c-example.html#a131">httpd/httpserv.c</a>, <a class="el" href="portdio_2portdio_8c-example.html#a301">portdio/portdio.c</a>, <a class="el" href="rs232d_2rs232d_8c-example.html#a377">rs232d/rs232d.c</a>, <a class="el" href="threads_2threads_8c-example.html#a454">threads/threads.c</a>, and <a class="el" href="timers_2timers_8c-example.html#a469">timers/timers.c</a>.</dl>    </td>
  </tr>
</table>
<hr>
<address>
  <small>
    &copy;&nbsp;2000-2006 by egnite Software GmbH - 
    visit <a href="http://www.ethernut.de/">http://www.ethernut.de/</a>
  </small>
</address>
</body>
</html>
